<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Specs  Frame  Selector Using Web cam</title>
	<link rel="stylesheet" href="css/bootstrap.min.css">  
        <link rel="stylesheet" href="css/animate.css">
        <link rel="stylesheet" herf="css/style.css">
	<script src="js/jquery-1.7.1.min.js"></script>
  	<script src="js/bootstrap.min.js"></script>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top">
  		<div class="container-fluid">
    			<div class="navbar-header">
      				<a class="navbar-brand" href="#">	<img src="img/footer-logo.png" alt="Specs Frame Selector" style="margin-top: -11px;">
				</a>
    			</div>
    			<div>
        			<p id="info">Please allow access to your camera!</p>
       			</div>
  		</div>
	</nav>
	<header class="top-header">
  		<h1 style="float:left;">Take a Look</h1><h1 style="float:right;">Pic a frame to try</h1>
	</header>
	<canvas id="output"></canvas>
	<div id="gallary"> 
<!--<header class="top-header">
  <h1>Pic a frame to try</h1>
</header>-->
	<div class="img">
	<a  href="#"><img src="noFrame2.png" id="noframe" alt="No Frame" width="130px" height="100px" onclick="noFrame()"></a>
 	<div class="desc">No Frame</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="reload.png" id="reload" alt="No Frame" width="130px" height="100px" onclick="location.reload();"></a>
	<div class="desc">Reload Page</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame1.png" id="f1" width="130px" height="100px" onclick="fsrc1()"></a>
 	<div class="desc">Frame1</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame2.png" id="f2" class="frame" width="130px" height="100px" onclick="fsrc2()"></a>
 	<div class="desc">Frame 2</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame3.png" id="f3" class="frame" width="130px" height="100px" onclick="fsrc3()"></a>
 	<div class="desc">Frame 3</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame4.png" id="f4" class="frame"  width="130px" height="100px" onclick="fsrc4()"></a>
 	<div class="desc">Frame 4</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame5.png" id="f5" class="frame" width="130px" height="100px" onclick="fsrc5()"></a>
 	<div class="desc">Frame 5</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame6.png" id="f6" class="frame" width="130px" height="100px" onclick="fsrc6()"></a>
 	<div class="desc">Frame 6</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame7.png" id="f7" class="frame" width="130px" height="100px" onclick="fsrc7()"></a>
 	<div class="desc">Frame 7</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="frame8.png" id="f8" class="frame" width="130px" height="100px" onclick="fsrc8()"></a>
 	<div class="desc">Frame 8</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="no.image.600x300.png" id="f8" class="frame" width="130px" height="100px" ></a>
 	<div class="desc">Frame 9</div>
	</div>
	<div class="img">
 	<a  href="#"><img src="no.image.600x300.png" id="f8" class="frame" width="130px" height="100px" ></a>
 	<div class="desc">Frame 10</div>
	</div>
	</div>
	</div>
	<a  href="#" class="button">
	<span>Back</span>
	</a>
	<script src="ccv.js"></script>
	<script src="face.js"></script>
	<script>
	//this is the code for stop
	function fstop() {    	video.pause();	video.src="";	};
	//Script for changig the freme 
	$(document).ready(function(){    	$(".frame").click(function(){    	var idx=this.id;//f3 	//alert(idx);//f3 	var frameid = $(this).attr('id');
	$("#f1").attr("id", frameid);	alert($("#f1").attr(src));        $("#f1").attr("id",idx);		$("idx").attr("id", f1);           });	});
	var getSrc = function(imgSource) {    var img = new Image();    img = imgSource;    return img;};
	var src1 = $("#f1").attr("src");
	var src2 = $("#f2").attr("src");
	var src3 = $("#f3").attr("src");
	var src4 = $("#f4").attr("src");
	var src5 = $("#f5").attr("src");
	var src6 = $("#f6").attr("src");
	var src7 = $("#f7").attr("src");
	var src8 = $("#f8").attr("src");
/*function toCelsius(f) {    return (5/9) * (f-32);}*/
	function fstop() {    video.pause();video.src="";}
// requestAnimationFrame shim
(function() {	var i = 0,	lastTime = 0,	vendors = ['ms', 'moz', 'webkit', 'o'];		while (i < vendors.length && !window.requestAnimationFrame) {		window.requestAnimationFrame = window[vendors[i] + 'RequestAnimationFrame'];	i++;	}
	if (!window.requestAnimationFrame) {		window.requestAnimationFrame = function(callback, element) {			var currTime = new Date().getTime(),
				timeToCall = Math.max(0, 1000 / 60 - currTime + lastTime),	id = setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);		
			lastTime = currTime + timeToCall;	return id;	};	}}());
var App = {	start: function(stream) {App.video.addEventListener('canplay', function() {			App.video.removeEventListener('canplay');
			setTimeout(function() {	App.video.play();App.canvas.style.display = 'inline';	App.info.style.display = 'none';	App.canvas.width = App.video.videoWidth;	App.canvas.height = App.video.videoHeight;	App.backCanvas.width = App.video.videoWidth / 4;	App.backCanvas.height = App.video.videoHeight / 4;		App.backContext = App.backCanvas.getContext('2d');			
				var w = 300 / 4 * 0.8,		h = 270 / 4 * 0.8;	App.comp = [{		x: (App.video.videoWidth / 4 - w) / 2,		y: (App.video.videoHeight / 4 - h) / 2,		width: w, 	height: h,	}];	App.drawToCanvas();	}, 500);}, true);		var domURL = window.URL || window.webkitURL;	App.video.src = domURL ? domURL.createObjectURL(stream) : stream;	},
	denied: function() {App.info.innerHTML = 'Camera access denied!<br>Please reload and try again.';	},
	error: function(e) {if (e) {console.error(e);}	App.info.innerHTML = 'Please go to about:flags in Google Chrome and enable the &quot;MediaStream&quot; flag.';
	},	drawToCanvas: function() {	requestAnimationFrame(App.drawToCanvas);		var video = App.video,	ctx = App.context,		backCtx = App.backContext,	m = 4,		w = 4,	i,	comp;	ctx.drawImage(video, 0, 0, App.canvas.width, App.canvas.height);			backCtx.drawImage(video, 0, 0, App.backCanvas.width, App.backCanvas.height); comp = ccv.detect_objects(App.ccv = App.ccv || {canvas: App.backCanvas,cascade: cascade,interval: 4,min_neighbors: 1	});		if (comp.length) {	App.comp = comp;	}	for (i = App.comp.length; i--; ) {	ctx.drawImage(App.glasses, (App.comp[i].x - w / 2) * m, (App.comp[i].y - w / 2) * m, (App.comp[i].width + w) * m, (App.comp[i].height + w) * m);	}	}};
/*var y
$(document).ready(function(){    $("#f1").on("click", function(){   window.globalVar =y;     y='frame3.png';    });
});
*/
//twisting to put dynamic values into the code 
function noFrame()	{ var x="";App.glasses.src = x;}
function fsrc1()  	{ var x=getSrc(src1);App.glasses.src = x;}
function fsrc2() 	{ var x=getSrc(src2);App.glasses.src = x;}
function fsrc3()	{ var x=getSrc(src3);App.glasses.src = x;}
function fsrc4()	{ var x=getSrc(src4); App.glasses.src = x; }
function fsrc5()	{ var x=getSrc(src5); App.glasses.src = x; }
function fsrc6()	{ var x=getSrc(src6); App.glasses.src = x; }
function fsrc7()	{ var x=getSrc(src7);App.glasses.src = x;}
function fsrc8()	{ var x=getSrc(src8);App.glasses.src = x;}
function fsrc9()	{ var x=getSrc(src9);App.glasses.src = x;}
App.glasses = new Image();
 
   /* var x = document.getElementById("f5").src;*/
App.init = function() { App.video = document.createElement('video'); App.backCanvas = document.createElement('canvas'); App.canvas = document.querySelector('#output'); App.canvas.style.display = 'none'; App.context = App.canvas.getContext('2d'); App.info = document.querySelector('#info');
		navigator.getUserMedia_ = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
try {	navigator.getUserMedia_({video: true,	audio: false	}, App.start, App.denied);	} catch (e) {	try { navigator.getUserMedia_('video', App.start, App.denied);	} catch (e) {	App.error(e);	}	}	App.video.loop = App.video.muted = true;	App.video.load();}; App.init();
</script>
</body>
</html>
